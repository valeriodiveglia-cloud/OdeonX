// src/lib/i18n.ts
export type Lang = 'en' | 'vi'

const dict = {
  en: {
    Loading: 'Loading…',
    Settings: 'Settings',
    Unsaved: '(unsaved)',
    Save: 'Save',
    Reset: 'Reset',
    ResetLocally: 'Reset locally',
    ResetTip: 'Only resets locally. Save to persist.',
    SavedOk: 'Settings saved',
    SavedErr: 'Save failed',
    General: 'General',
    Language: 'Language',
    Currency: 'Currency',
    ReviewMonths: 'Review stale after (months)',
    AskCsvConfirm: 'Ask confirmation when CSV import introduces new suppliers or categories',
    CostsVat: 'Costs & VAT',
    VatRate: 'VAT rate %',
    DefaultMarkup: 'Default markup %',
    UnitCostDecimals: 'Unit cost decimals',
    DecimalsNone: 'No decimals',
    DecimalsOne: '1 decimal',
    ShowDecimals: 'Show costs with decimals in tables',
    Recipes: 'Recipes',
    RecipesLayout: 'Recipes layout',
    LayoutSplit: 'Two tabs: Final and Prep',
    LayoutSingle: 'Single combined list',
    DataImport: 'Data & Import',
    TrashDays: 'Trash retention days',
    CsvNote: 'CSV import will normalize UOM to gr, ml, unit and enforce single default per name.',
    DangerZone: 'Danger Zone',

    // ---------- Dashboard (NEW) ----------
    DashboardReady: 'Dashboard ready',
    WelcomeTo: 'Welcome to',
    DashboardSubtitle: 'Central hub for your modules.',
    Costing: 'Costing',
    SoonMoreModules: 'More modules will appear here as they are ready.',

    // ---------- Settings: Company Info ----------
    CompanyInfo: 'Company Info',
    RestaurantName: 'Restaurant name',
    CompanyName: 'Company name',
    Address: 'Address',
    TaxCode: 'Tax code',
    Phone: 'Phone',
    Email: 'Email',
    Website: 'Website',
    Logo: 'Logo',
    TabName: 'Tab name',
    SecondTabName: 'Second tab name',

    // ---------- Materials ----------
    Materials: 'Materials',
    MaterialsList: 'Materials list',
    AddMaterial: 'Add material',
    NewMaterial: 'New material',
    EditMaterial: 'Edit material',
    Name: 'Name',
    Brand: 'Brand',
    Category: 'Category',
    Supplier: 'Supplier',
    SupplierName: 'Supplier name',
    Uom: 'UOM',
    PackagingSize: 'Packaging size',
    PackagePrice: 'Package cost',
    UnitCost: 'Unit cost',
    FinalPrice: 'Final price',
    IsDefault: 'Default',
    SetAsDefault: 'Set as default',
    OnlyOneDefaultPerName: 'Only one default per name will be kept',
    Yes: 'Yes',
    No: 'No',
    Search: 'Search',
    ImportCsv: 'Import CSV',
    ExportCsv: 'Export CSV',
    SelectMode: 'Select mode',
    SelectAll: 'Select all',
    SelectNone: 'Clear selection',
    DeleteSelected: 'Delete selected',
    ConfirmDelete: 'Confirm delete',
    AreYouSureDelete: 'Are you sure you want to delete the selected items?',
    Cancel: 'Cancel',
    Confirm: 'Confirm',
    Close: 'Close',
    CreatedAt: 'Created at',
    Updated: 'Updated',
    UpdatedShort: 'Updated',
    UpdatedAt: 'Updated at',
    History: 'History',
    PriceHistory: 'Price history',
    Filters: 'Filters',
    ClearFilters: 'Clear filters',
    Sort: 'Sort',
    Actions: 'Actions',
    Duplicate: 'Duplicate',
    Saved: 'Saved',
    Deleted: 'Deleted',
    NothingToExport: 'Nothing to export',
    NothingSelected: 'Nothing selected',
    Header: 'Header',
    PurchaseUOM: 'Purchase / UOM',
    Notes: 'Notes',
    Select: 'Select',
    AddCategory: 'Add Category',
    AddSupplier: 'Add Supplier',
    UnitCostAuto: 'Unit cost',
    Edit: 'Edit',
    Delete: 'Delete',
    Export: 'Export',
    Import: 'Import',
    BulkActions: 'Bulk actions',
    MarkReviewed: 'Mark as reviewed',
    MoveToTrash: 'Move to trash',
    Selected: 'selected',
    ExitSelection: 'Exit selection',
    EnterSelection: 'Enter selection',
    Selecting: 'Selecting…',
    FilterByName: 'Filter by name…',
    FilterByBrand: 'Filter by brand…',
    AllCategories: 'All categories',
    AllSuppliers: 'All suppliers',
    AllUOM: 'All UOM',
    FoodDrink: 'Food/Drink',
    FoodDrinkAll: 'Food/Drink: all',
    DefaultAll: 'Default: all',
    Clear: 'Clear',
    SelectRow: 'Select row',
    ConfirmDeleteMaterial: 'Delete this material?',
    DeleteFailed: 'Delete failed',
    NewCategoryName: 'New category name',
    NewSupplierName: 'New supplier name',
    CreateFailed: 'Create failed',
    ResolveImport: 'Resolve import',
    ConflictsExisting: 'Conflicts on existing items',
    KeepEmpty: 'Keep empty',
    CSV: 'CSV',
    Continue: 'Continue',
    ImportInProgress: 'Import in progress',
    CSVEmptyOrBad:
      'CSV appears empty or headers not recognized. Expected: Ingredient, Category, Supplier, Brand, Package QTY, UOM, Package Cost',
    UOMMissing: 'UOM missing in DB',
    CSVImported: 'CSV imported successfully.',
    Inserted: 'Inserted',
    Updated2: 'Updated',
    Skipped: 'Skipped',
    ImportFailed: 'Import failed',
    ExportFailed: 'Export failed',
    MarkReviewedFailed: 'Failed to mark as reviewed',
    ConfirmMoveToTrash:
      'Move {n} item(s) to trash?\nThey will be auto-deleted after 30 days.',
    NoMaterials: 'No materials',

    // ---- VAT columns in Materials table ----
    VatRatePct: 'VAT Rate (%)',
    UnitCostPlusVat: 'Unit cost + VAT',

    // ---- Bulk VAT editing ----
    BulkEditVat: 'Edit VAT rate (bulk)',
    EditVatRate: 'Edit VAT rate',
    AffectNItems: 'This will affect {n} selected item(s).',
    SetExactRate: 'Set exact VAT rate',
    AdjustBy: 'Adjust by',
    VatPercent: 'VAT (%)',
    Apply: 'Apply',

    // ---------- Materials History ----------
    MaterialsHistory: 'Materials history',
    DetailTab: 'Detail',
    ListTab: 'List',
    MaterialLabel: 'Material',
    DateFrom: 'From',
    DateTo: 'To',
    Last6Months: '6 months',
    Last12Months: '12 months',
    Last18Months: '18 months',
    TrendUnitCost: 'Unit cost trend',
    NoDataInRange: 'No data in selected range',
    Changes: 'Changes',
    Date: 'Date',
    OldPackPrice: 'Old pack price',
    NewPackPrice: 'New pack price',
    OldPackSize: 'Old pack size',
    NewPackSize: 'New pack size',
    OldUnit: 'Old unit',
    NewUnit: 'New unit',
    DeltaUnit: 'Δ unit',
    PctUnit: '% unit',
    NoChanges: 'No changes',
    LastChangePerMaterial: 'Last change per material',
    PctChange: '% change',
    Trend: 'Trend',
    NoChangesInRange: 'No changes in selected range',
    OpenDetail: 'Open detail',
    ChangedAt: 'Changed at',

    // ---------- Recipes ----------
    Dish: 'Dish',
    Prep: 'Prep',
    NewDish: 'New Dish',
    NewPrep: 'New Prep',
    FilterByNameTag: 'Filter by Name/Tag...',
    AllTypes: 'All Types',
    Type: 'Type',
    Food: 'Food',
    Drink: 'Drink',
    Price: 'Price',
    FoodCostPct: 'Food Cost %',
    SuggestedPrice: 'Suggested Price',
    YieldQty: 'Yield Qty',
    WastePct: 'Waste %',
    ServingCost: 'Serving Cost',
    TotalCost: 'Total Cost',
    PortionSize: 'Portion Size',
    Yield: 'Yield',
    NumberOfServings: 'Number of Servings (auto)',
    Ingredients: 'Ingredients',
    Tags: 'Tags',
    AddTag: 'Add tag',
    SelectTags: 'Select Tags',
    AddTagHint: 'Add tag and press Enter',
    MaxTagsHint: 'Max 5 tags',
    NoTags: 'No tags',
    DishName: 'Dish Name',
    RecipeName: 'Recipe Name',
    Markup: 'Markup (×)',
    AddRow: 'Add row',
    Total: 'Total',
    ExportDishesTitle: 'Export dishes to Excel',
    ExportPrepsTitle: 'Export preps to Excel',
    EnableSelectionTitle: 'Enable selection',
    SelectAllDishes: 'Select all dishes',
    SelectAllPreps: 'Select all preps',
    NoDishes: 'No dishes',
    NoPreps: 'No prep recipes',
    DeletePrepConfirm: 'Delete this prep recipe?',
    DeleteDishConfirm: 'Delete this dish?',
    AddDishCategory: 'Add Dish Category',
    AddPrepCategory: 'Add Prep Category',
    CategoryNamePlaceholder: 'Category name',
    SelectCategory: 'Select Category',
    PleaseFillRequired: 'Please fill the required fields',

    // ---------- Additions used by UI ----------
    Item: 'Item',
    Qty: 'Qty',
    Pricing: 'Pricing',
    PrepSheet: 'Prep Sheet',
    EditPrepTitle: 'Edit Prep',
    NewPrepTitle: 'New Prep',
    DishSheet: 'Dish Sheet',
    EditDishTitle: 'Edit Dish',
    NewDishTitle: 'New Dish',
    SelectAllDishesAria: 'Select all dishes',
    SelectAllPrepsAria: 'Select all preps',
    Preparations: 'Preparations',

    // ---------- New additions ----------
    Equipment: 'Equipment',
    EquipmentHistory: 'Equipment History',
    Home: 'Home',

    // ---------- Equipment page ----------
    CateringRentalEquipment: 'Catering Rental Equipment',
    EquipmentSheet: 'Equipment',
    EquipmentOne: 'Equipment',
    NewEquipment: 'New Equipment',
    EditEquipment: 'Edit Equipment',
    Cost: 'Cost',
    FinalPriceAuto: 'Final Price',
    LastUpdate: 'Last Update',
    ExportExcel: 'Export Excel',
    ImportCSV: 'Import CSV',
    SaveFailed: 'Save failed',
    DeleteConfirm: 'Delete this item?',
    NewCategoryNamePrompt: 'New category name',
    NewSupplierNamePrompt: 'New supplier name',
    CSVEmptyOrHeaders: 'CSV appears empty or headers not recognized.',
    RequiredCols: 'Required columns with values',
    RowsFailingValidation: 'Rows failing validation',
    IsOptional: 'is optional',
    CSVImportedOk: 'CSV imported successfully',
    NewCategories: 'New categories',
    NewSuppliers: 'New suppliers',
    FailedCreatingCategories: 'Failed creating categories',
    FailedCreatingSuppliers: 'Failed creating suppliers',
    FailedToMarkReviewed: 'Failed to mark as reviewed',
    MoveToTrashConfirm: 'Move {n} item(s) to trash?',
    MoveToTrashExplain: 'They will be auto-deleted after 30 days.',
    FailedToMoveTrash: 'Failed to move to trash',
    SelectedCountSuffix: 'selected',
    NoEquipment: 'No equipment',
    MarkAsReviewed: 'Mark as reviewed',

    // ---- Equipment settings (used in SettingsClient) ----
    DefaultImportMarkup: 'Default Import Markup',
    DefaultImportMarkupHint: 'Used as a multiplier: price = (cost + VAT) × markup.',

    // ---------- Equipment History ----------
    EquipmentCostHistory: 'Equipment Cost History',
    Detail: 'Detail',
    List: 'List',
    From: 'From',
    To: 'To',
    SixMonths: '6 months',
    TwelveMonths: '12 months',
    EighteenMonths: '18 months',
    TrendCost: 'Trend cost',
    NoDataInSelectedRange: 'No data in selected range',
    ChangesTitle: 'Changes',
    OldCost: 'Old Cost',
    NewCost: 'New Cost',
    Change: 'Change',
    PercentChange: '% Change',
    LastChangePerEquipment: 'Last change per equipment',

    // ---------- Archive ----------
    Archive: 'Archive',
    Archived: 'Archived',
    Unarchive: 'Unarchive',
    ShowArchived: 'Show archived',
    HideArchived: 'Hide archived',
    ArchiveSelected: 'Archive selected',
    ConfirmArchive: 'Archive this item?',
    Restore: 'Restore',

    // ---------- ACCOUNTS ----------
    Accounts: 'Accounts',
    NewAccount: 'New Account',
    ManageAccounts: 'Manage Accounts',
    NewAccountTitle: 'New account',
    ManageAccountsTitle: 'Manage accounts',
    AccountDetailsTitle: 'Account details',
    Role: 'Role',
    Active: 'Active',
    Status: 'Status',
    SendLink: 'Send link',
    Remove: 'Remove',
    NotAllowed: 'Not allowed',
    EmailSent: 'Email sent.',
    SendLinkError: 'Send link error',
    InvalidEmail: 'Invalid email',
    AdminOnlyCreatesStaff: 'Admins can only create staff',
    AdminOnlyManageStaff: 'Admins can only manage staff',
    Create: 'Create',
    Creating: 'Creating…',
    CreateAndAsk: 'Create account and choose whether to send the link',
    NoAccounts: 'No accounts',
    Authenticated: 'authenticated',
    Pending: 'pending',
    SendAccessLinkTitle: 'Send access link?',
    SendAccessLinkBodyKnown: 'Do you want to send a sign-in link to {{email}}?',
    SendAccessLinkBodyGeneric: 'Do you want to send a sign-in link now?',
    NotNow: 'Not now',

    // --- Modal keys used in settings-client (added/normalized) ---
    SendInvite: 'Send access link',
    SendInviteTo: 'Send access link to', // no {{email}}
    Skip: 'Skip',
    Send: 'Send',
    SendAccessLink: 'Send access link', // tooltip/title in table
    EditAccount: 'Edit account',
    Position: 'Position',
    NoData: 'No data',

    // ---------- AUTH / LOGIN ----------
    StaffLogin: 'Staff login',
    Password: 'Password',
    Show: 'Show',
    Hide: 'Hide',
    Login: 'Login',
    LoggingIn: 'Logging in…',
    LoggedInRedirect: 'Logged in. Redirecting…',
    ErrInvalidLogin: 'Invalid login credentials',
    ErrEmailNotConfirmed: 'Email not confirmed. Check your inbox.',
    ErrRateLimited: 'Too many attempts. Try again later.',
    ErrNetwork: 'Network error. Check your connection.',
    ErrUnknown: 'Unexpected error',
    ErrProfileRead: 'Could not read your profile',
    ErrProfileSync: 'Could not sync your profile',

    // ---------- PROFILE / PASSWORD ----------
    Profile: 'Profile',
    ChangePassword: 'Change password',
    ChangePasswordDesc: 'Update your password from here',
    EnterCurrentPassword: 'Enter your current password',
    CurrentPassword: 'Current password',
    RepeatNewPassword: 'Repeat new password',
    NewPassword: 'New password',
    ConfirmPassword: 'Confirm password',
    MinChars: 'Min 8 characters',
    PasswordLooksGood: 'Looks good',
    PasswordTooShort: 'Password too short (min 8 characters)',
    PasswordsDontMatch: 'Passwords do not match',
    NewEqualsOld: 'New password must be different from the current one',
    CurrentPasswordWrong: 'Current password is incorrect',
    PasswordUpdated: 'Password updated',

    // ---------- Missing helpers / Settings page extras ----------
    Utilities: 'Utilities',
    EditCategories: 'Edit categories',
    Trash: 'Trash',
    Data: 'Data',
    DataDangerNote: 'Destructive actions. Data will be permanently deleted. Make a backup if needed.',
    MaterialsExclusiveDefault: 'Exclusive default per item name',

    // VAT panel labels used in settings-client
    Vat: 'VAT',
    VatEnable: 'Enable VAT',
    VatDefaultRate: 'Default VAT % Rate',

    // Reset modal (scope labels & descriptions)
    ScopeMaterials: 'Materials',
    ScopeSuppliers: 'Suppliers',
    ScopeCategories: 'Categories',
    ScopeRecipes: 'Recipes',
    ScopeEquipment: 'Equipment',
    ScopeAll: 'All',
    ScopeDescMaterials: 'Delete all materials and their price history. UOM is not touched.',
    ScopeDescSuppliers: 'Delete suppliers and supplier-material relations.',
    ScopeDescCategories: 'Delete recipe, dish and material categories.',
    ScopeDescRecipes: 'Delete final and prep recipes and their items.',
    ScopeDescEquipment: 'Delete equipment and its price history.',
    ScopeDescAll: 'Full reset of recipes, categories, materials, suppliers and equipment.',
    OnlyOwnerResetAll: 'Only owner can reset all',
    ResetAll: 'Reset All',
    TypeToConfirm: 'Type to confirm:',
    IrreversibleAck: 'I understand this action is irreversible',
    ResetCompleted: 'Reset completed',
    OK: 'OK',

    // Reset buttons (Data section)
    ResetMaterials: 'Reset Materials',
    ResetSuppliers: 'Reset Suppliers',
    ResetCategories: 'Reset Categories',
    ResetRecipes: 'Reset Recipes',
    ResetEquipment: 'Reset Equipment',

    // Category chooser modal
    ChooseCategories: 'Choose categories',
    ChooseCategoriesDesc: 'Select which set of categories you want to edit.',
    DishCategories: 'Dish Categories',
    PrepCategories: 'Prep Categories',
    EquipmentCategories: 'Equipment Categories',

    // Small generic
    NoItems: 'No items',
    VatDisabledWarn: 'VAT is disabled in Settings',
    NothingToResolve: 'Nothing to resolve.',
    NewCategoriesFromCsv: 'New categories in CSV',
    ChooseCreateOrMap: 'Choose to create it or map to an existing one',
    NewSuppliersFromCsv: 'New suppliers in CSV',
    ProceedWithImportQuestion: 'Proceed with import?',
    ChooseFile: 'Choose file',
    NoFileChosen: 'No file chosen',

    // ---------- Suppliers page (NEW) ----------
    Suppliers: 'Suppliers',
    SupplierLabel: 'Supplier',
    NewSupplier: 'New supplier',
    PointOfContact: 'Point of Contact',
    OrderMethod: 'Order Method',
    PaymentTerm: 'Payment Term',
    PaymentMethod: 'Payment Method',
    SearchSuppliersPlaceholder: 'Search suppliers, contact, phone, email…'
  },

  vi: {
    Loading: 'Đang tải…',
    Settings: 'Cài đặt',
    Unsaved: '(chưa lưu)',
    Save: 'Lưu',
    Reset: 'Đặt lại',
    ResetLocally: 'Đặt lại cục bộ',
    ResetTip: 'Chỉ đặt lại trên máy. Nhấn Lưu để áp dụng vĩnh viễn.',
    SavedOk: 'Đã lưu cài đặt',
    SavedErr: 'Lưu thất bại',
    General: 'Chung',
    Language: 'Ngôn ngữ',
    Currency: 'Tiền tệ',
    ReviewMonths: 'Đánh dấu cũ sau (tháng)',
    AskCsvConfirm: 'Hỏi xác nhận khi CSV có nhà cung cấp hoặc danh mục mới',
    CostsVat: 'Chi phí & VAT',
    VatRate: 'VAT %',
    DefaultMarkup: 'Tỷ lệ markup mặc định %',
    UnitCostDecimals: 'Số chữ số thập phân cho đơn giá',
    DecimalsNone: 'Không có thập phân',
    DecimalsOne: '1 chữ số thập phân',
    ShowDecimals: 'Hiển thị số thập phân trong bảng',
    Recipes: 'Công thức',
    RecipesLayout: 'Bố cục công thức',
    LayoutSplit: 'Hai tab: Món cuối và Sơ chế',
    LayoutSingle: 'Danh sách kết hợp',
    DataImport: 'Dữ liệu & Nhập',
    TrashDays: 'Số ngày trong thùng rác',
    CsvNote: 'CSV sẽ chuẩn hóa đơn vị về gr, ml, unit và đảm bảo chỉ một mặc định cho mỗi tên.',
    DangerZone: 'Khu vực nguy hiểm',

    // ---------- Dashboard (NEW) ----------
    DashboardReady: 'Bảng điều khiển đã sẵn sàng',
    WelcomeTo: 'Chào mừng đến với',
    DashboardSubtitle: 'Trung tâm cho các mô-đun của bạn.',
    Costing: 'Tính giá thành',
    SoonMoreModules: 'Các mô-đun khác sẽ xuất hiện tại đây khi sẵn sàng.',

    // ---------- Settings: Company Info ----------
    CompanyInfo: 'Thông tin công ty',
    RestaurantName: 'Tên nhà hàng',
    CompanyName: 'Tên công ty',
    Address: 'Địa chỉ',
    TaxCode: 'Mã số thuế',
    Phone: 'Điện thoại',
    Email: 'Email',
    Website: 'Website',
    Logo: 'Logo',
    TabName: 'Tên tab',
    SecondTabName: 'Tên tab thứ hai',

    // ---------- Materials ----------
    Materials: 'Nguyên liệu',
    MaterialsList: 'Danh sách nguyên liệu',
    AddMaterial: 'Thêm nguyên liệu',
    NewMaterial: 'Nguyên liệu mới',
    EditMaterial: 'Sửa nguyên liệu',
    Name: 'Tên',
    Brand: 'Thương hiệu',
    Category: 'Danh mục',
    Supplier: 'Nhà cung cấp',
    SupplierName: 'Tên nhà cung cấp',
    Uom: 'Đơn vị',
    PackagingSize: 'Quy cách đóng gói',
    PackagePrice: 'Chi phí gói',
    UnitCost: 'Đơn giá',
    FinalPrice: 'Giá bán cuối',
    IsDefault: 'Mặc định',
    SetAsDefault: 'Đặt làm mặc định',
    OnlyOneDefaultPerName: 'Chỉ giữ một mặc định cho mỗi tên',
    Yes: 'Có',
    No: 'Không',
    Search: 'Tìm kiếm',
    ImportCsv: 'Nhập CSV',
    ExportCsv: 'Xuất CSV',
    SelectMode: 'Chế độ chọn',
    SelectAll: 'Chọn tất cả',
    SelectNone: 'Bỏ chọn',
    DeleteSelected: 'Xóa đã chọn',
    ConfirmDelete: 'Xác nhận xóa',
    AreYouSureDelete: 'Bạn có chắc muốn xóa các mục đã chọn không?',
    Cancel: 'Hủy',
    Confirm: 'Xác nhận',
    Close: 'Đóng',
    CreatedAt: 'Tạo lúc',
    Updated: 'Cập nhật',
    UpdatedShort: 'Cập nhật',
    UpdatedAt: 'Cập nhật lúc',
    History: 'Lịch sử',
    PriceHistory: 'Lịch sử giá',
    Filters: 'Bộ lọc',
    ClearFilters: 'Xóa bộ lọc',
    Sort: 'Sắp xếp',
    Actions: 'Thao tác',
    Duplicate: 'Nhân bản',
    Saved: 'Đã lưu',
    Deleted: 'Đã xóa',
    NothingToExport: 'Không có gì để xuất',
    NothingSelected: 'Không có mục nào được chọn',
    Header: 'Tiêu đề',
    PurchaseUOM: 'Mua hàng / Đơn vị',
    Notes: 'Ghi chú',
    Select: 'Chọn',
    AddCategory: 'Thêm danh mục',
    AddSupplier: 'Thêm nhà cung cấp',
    UnitCostAuto: 'Đơn giá',
    Edit: 'Sửa',
    Delete: 'Xóa',
    Export: 'Xuất',
    Import: 'Nhập',
    BulkActions: 'Hành động hàng loạt',
    MarkReviewed: 'Đánh dấu đã rà soát',
    MoveToTrash: 'Chuyển vào thùng rác',
    Selected: 'đã chọn',
    ExitSelection: 'Thoát chọn',
    EnterSelection: 'Bật chế độ chọn',
    Selecting: 'Đang chọn…',
    FilterByName: 'Lọc theo tên…',
    FilterByBrand: 'Lọc theo thương hiệu…',
    AllCategories: 'Tất cả danh mục',
    AllSuppliers: 'Tất cả nhà cung cấp',
    AllUOM: 'Tất cả đơn vị',
    FoodDrink: 'Thực phẩm/Đồ uống',
    FoodDrinkAll: 'Thực phẩm/Đồ uống: tất cả',
    DefaultAll: 'Mặc định: tất cả',
    Clear: 'Xóa lọc',
    SelectRow: 'Chọn hàng',
    ConfirmDeleteMaterial: 'Xóa nguyên liệu này?',
    DeleteFailed: 'Xóa thất bại',
    NewCategoryName: 'Tên danh mục mới',
    NewSupplierName: 'Tên nhà cung cấp mới',
    CreateFailed: 'Tạo thất bại',
    ResolveImport: 'Giải quyết nhập dữ liệu',
    ConflictsExisting: 'Xung đột trên mục hiện có',
    KeepEmpty: 'Giữ trống',
    CSV: 'CSV',
    Continue: 'Tiếp tục',
    ImportInProgress: 'Đang nhập dữ liệu',
    CSVEmptyOrBad:
      'CSV trống hoặc tiêu đề không đúng. Cần: Ingredient, Category, Supplier, Brand, Package QTY, UOM, Package Cost',
    UOMMissing: 'Thiếu đơn vị trong CSDL',
    CSVImported: 'Nhập CSV thành công.',
    Inserted: 'Đã thêm',
    Updated2: 'Đã cập nhật',
    Skipped: 'Bỏ qua',
    ImportFailed: 'Nhập thất bại',
    ExportFailed: 'Xuất thất bại',
    MarkReviewedFailed: 'Không thể đánh dấu đã rà soát',
    ConfirmMoveToTrash:
      'Chuyển {n} mục vào thùng rác?\nSẽ bị xóa sau 30 ngày.',
    NoMaterials: 'Không có nguyên liệu',

    // ---- VAT columns in Materials table ----
    VatRatePct: 'Tỷ lệ VAT (%)',
    UnitCostPlusVat: 'Đơn giá + VAT',

    // ---- Bulk VAT editing ----
    BulkEditVat: 'Sửa VAT hàng loạt',
    EditVatRate: 'Chỉnh tỷ lệ VAT',
    AffectNItems: 'Sẽ áp dụng cho {n} mục đã chọn.',
    SetExactRate: 'Đặt tỷ lệ VAT cụ thể',
    AdjustBy: 'Điều chỉnh',
    VatPercent: 'VAT (%)',
    Apply: 'Áp dụng',

    // ---------- Materials History ----------
    MaterialsHistory: 'Lịch sử nguyên liệu',
    DetailTab: 'Chi tiết',
    ListTab: 'Danh sách',
    MaterialLabel: 'Nguyên liệu',
    DateFrom: 'Từ',
    DateTo: 'Đến',
    Last6Months: '6 tháng',
    Last12Months: '12 tháng',
    Last18Months: '18 tháng',
    TrendUnitCost: 'Xu hướng đơn giá',
    NoDataInRange: 'Không có dữ liệu trong khoảng đã chọn',
    Changes: 'Thay đổi',
    Date: 'Ngày',
    OldPackPrice: 'Giá gói cũ',
    NewPackPrice: 'Giá gói mới',
    OldPackSize: 'Quy cách cũ',
    NewPackSize: 'Quy cách mới',
    OldUnit: 'Đơn vị cũ',
    NewUnit: 'Đơn vị mới',
    DeltaUnit: 'Δ đơn giá',
    PctUnit: '% đơn giá',
    NoChanges: 'Không có thay đổi',
    LastChangePerMaterial: 'Lần thay đổi gần nhất theo nguyên liệu',
    PctChange: '% thay đổi',
    Trend: 'Xu hướng',
    NoChangesInRange: 'Không có thay đổi trong khoảng đã chọn',
    OpenDetail: 'Mở chi tiết',
    ChangedAt: 'Thay đổi lúc',

    // ---------- Recipes ----------
    Dish: 'Món',
    Prep: 'Sơ chế',
    NewDish: 'Món mới',
    NewPrep: 'Sơ chế mới',
    FilterByNameTag: 'Lọc theo Tên/Tag...',
    AllTypes: 'Tất cả loại',
    Type: 'Loại',
    Food: 'Thức ăn',
    Drink: 'Đồ uống',
    Price: 'Giá bán',
    FoodCostPct: '% chi phí thực phẩm',
    SuggestedPrice: 'Giá gợi ý',
    YieldQty: 'Sản lượng',
    WastePct: '% hao hụt',
    ServingCost: 'Giá thành/khẩu phần',
    TotalCost: 'Tổng giá thành',
    PortionSize: 'Khẩu phần',
    Yield: 'Sản lượng',
    NumberOfServings: 'Số khẩu phần (tự động)',
    Ingredients: 'Nguyên liệu',
    Tags: 'Tags',
    AddTag: 'Thêm tag',
    SelectTags: 'Chọn tag',
    AddTagHint: 'Thêm tag rồi nhấn Enter',
    MaxTagsHint: 'Tối đa 5 tag',
    NoTags: 'Chưa có tag',
    DishName: 'Tên món',
    RecipeName: 'Tên công thức',
    Markup: 'Hệ số nhân (×)',
    AddRow: 'Thêm dòng',
    Total: 'Tổng',
    ExportDishesTitle: 'Xuất món ra Excel',
    ExportPrepsTitle: 'Xuất sơ chế ra Excel',
    EnableSelectionTitle: 'Bật chế độ chọn',
    SelectAllDishes: 'Chọn tất cả món',
    SelectAllPreps: 'Chọn tất cả sơ chế',
    NoDishes: 'Không có món',
    NoPreps: 'Không có công thức sơ chế',
    DeletePrepConfirm: 'Xóa công thức sơ chế này?',
    DeleteDishConfirm: 'Xóa món này?',
    AddDishCategory: 'Thêm danh mục món',
    AddPrepCategory: 'Thêm danh mục sơ chế',
    CategoryNamePlaceholder: 'Tên danh mục',
    SelectCategory: 'Chọn danh mục',
    PleaseFillRequired: 'Vui lòng điền các trường bắt buộc',

    // ---------- Recipes UI ----------
    Item: 'Mục',
    Qty: 'SL',
    Pricing: 'Định giá',
    PrepSheet: 'Phiếu sơ chế',
    EditPrepTitle: 'Sửa sơ chế',
    NewPrepTitle: 'Sơ chế mới',
    DishSheet: 'Phiếu món',
    EditDishTitle: 'Sửa món',
    NewDishTitle: 'Món mới',
    SelectAllDishesAria: 'Chọn tất cả món',
    SelectAllPrepsAria: 'Chọn tất cả sơ chế',
    Preparations: 'Sơ chế',

    // ---------- New additions ----------
    Equipment: 'Thiết bị',
    EquipmentHistory: 'Lịch sử thiết bị',
    Home: 'Trang chủ',

    // ---------- Equipment ----------
    CateringRentalEquipment: 'Thiết bị thuê phục vụ tiệc',
    EquipmentSheet: 'Thiết bị',
    EquipmentOne: 'Thiết bị',
    NewEquipment: 'Thiết bị mới',
    EditEquipment: 'Sửa thiết bị',
    Cost: 'Chi phí',
    FinalPriceAuto: 'Giá cuối',
    LastUpdate: 'Cập nhật lần cuối',
    ExportExcel: 'Xuất Excel',
    ImportCSV: 'Nhập CSV',
    SaveFailed: 'Lưu thất bại',
    DeleteConfirm: 'Xóa mục này?',
    NewCategoryNamePrompt: 'Tên danh mục mới',
    NewSupplierNamePrompt: 'Tên nhà cung cấp mới',
    CSVEmptyOrHeaders: 'CSV trống hoặc tiêu đề không đúng.',
    RequiredCols: 'Các cột bắt buộc phải có giá trị',
    RowsFailingValidation: 'Các dòng không đạt kiểm tra',
    IsOptional: 'là tùy chọn',
    CSVImportedOk: 'Nhập CSV thành công',
    NewCategories: 'Danh mục mới',
    NewSuppliers: 'Nhà cung cấp mới',
    FailedCreatingCategories: 'Tạo danh mục thất bại',
    FailedCreatingSuppliers: 'Tạo nhà cung cấp thất bại',
    FailedToMarkReviewed: 'Không thể đánh dấu đã rà soát',
    MoveToTrashConfirm: 'Chuyển {n} mục vào thùng rác?',
    MoveToTrashExplain: 'Sẽ bị xóa sau 30 ngày.',
    FailedToMoveTrash: 'Không thể chuyển vào thùng rác',
    SelectedCountSuffix: 'đã chọn',
    NoEquipment: 'Không có thiết bị',
    MarkAsReviewed: 'Đánh dấu đã rà soát',

    // ---- Equipment settings (used in SettingsClient) ----
    DefaultImportMarkup: 'Markup nhập mặc định',
    DefaultImportMarkupHint: 'Dùng như hệ số nhân: giá = (chi phí + VAT) × markup.',

    // ---------- Equipment History ----------
    EquipmentCostHistory: 'Lịch sử chi phí thiết bị',
    Detail: 'Chi tiết',
    List: 'Danh sách',
    From: 'Từ',
    To: 'Đến',
    SixMonths: '6 tháng',
    TwelveMonths: '12 tháng',
    EighteenMonths: '18 tháng',
    TrendCost: 'Xu hướng chi phí',
    NoDataInSelectedRange: 'Không có dữ liệu trong khoảng đã chọn',
    ChangesTitle: 'Thay đổi',
    OldCost: 'Chi phí cũ',
    NewCost: 'Chi phí mới',
    Change: 'Chênh lệch',
    PercentChange: '% Thay đổi',
    LastChangePerEquipment: 'Lần thay đổi gần nhất theo thiết bị',
    
    // ---------- Archive ----------
    Archive: 'Lưu trữ',
    Archived: 'Đã lưu trữ',
    Unarchive: 'Bỏ lưu trữ',
    ShowArchived: 'Hiện mục đã lưu trữ',
    HideArchived: 'Ẩn mục đã lưu trữ',
    ArchiveSelected: 'Lưu trữ đã chọn',
    ConfirmArchive: 'Lưu trữ mục này?',
    Restore: 'Khôi phục',

    // ---------- ACCOUNTS ----------
    Accounts: 'Tài khoản',
    NewAccount: 'Tài khoản mới',
    ManageAccounts: 'Quản lý tài khoản',
    NewAccountTitle: 'Tạo tài khoản',
    ManageAccountsTitle: 'Quản lý tài khoản',
    AccountDetailsTitle: 'Chi tiết tài khoản',
    Role: 'Vai trò',
    Active: 'Hoạt động',
    Status: 'Trạng thái',
    SendLink: 'Gửi link',
    Remove: 'Xóa',
    NotAllowed: 'Không được phép',
    EmailSent: 'Đã gửi email.',
    SendLinkError: 'Lỗi gửi liên kết',
    InvalidEmail: 'Email không hợp lệ',
    AdminOnlyCreatesStaff: 'Quản trị viên chỉ được tạo nhân viên',
    AdminOnlyManageStaff: 'Quản trị viên chỉ được quản lý nhân viên',
    Create: 'Tạo',
    Creating: 'Đang tạo…',
    CreateAndAsk: 'Tạo tài khoản và chọn gửi liên kết',
    NoAccounts: 'Không có tài khoản',
    Authenticated: 'đã xác thực',
    Pending: 'đang chờ',
    SendAccessLinkTitle: 'Gửi liên kết đăng nhập?',
    SendAccessLinkBodyKnown: 'Bạn có muốn gửi liên kết đăng nhập đến {{email}} không?',
    SendAccessLinkBodyGeneric: 'Bạn có muốn gửi liên kết đăng nhập ngay bây giờ không?',
    NotNow: 'Để sau',

    // --- Modal keys used in settings-client (added/normalized) ---
    SendInvite: 'Gửi liên kết đăng nhập',
    SendInviteTo: 'Gửi liên kết đăng nhập đến',
    Skip: 'Bỏ qua',
    Send: 'Gửi',
    SendAccessLink: 'Gửi liên kết đăng nhập',
    EditAccount: 'Sửa tài khoản',
    Position: 'Chức vụ',
    NoData: 'Không có dữ liệu',

    // ---------- AUTH / LOGIN ----------
    StaffLogin: 'Đăng nhập nhân viên',
    Password: 'Mật khẩu',
    Show: 'Hiện',
    Hide: 'Ẩn',
    Login: 'Đăng nhập',
    LoggingIn: 'Đang đăng nhập…',
    LoggedInRedirect: 'Đã đăng nhập. Đang chuyển trang…',
    ErrInvalidLogin: 'Thông tin đăng nhập không hợp lệ',
    ErrEmailNotConfirmed: 'Email chưa xác nhận. Vui lòng kiểm tra hộp thư.',
    ErrRateLimited: 'Thao tác quá nhiều lần. Thử lại sau.',
    ErrNetwork: 'Lỗi mạng. Kiểm tra kết nối của bạn.',
    ErrUnknown: 'Lỗi không xác định',
    ErrProfileRead: 'Không thể đọc hồ sơ của bạn',
    ErrProfileSync: 'Không thể đồng bộ hồ sơ của bạn',

    // ---------- PROFILE / PASSWORD ----------
    Profile: 'Hồ sơ',
    ChangePassword: 'Đổi mật khẩu',
    ChangePasswordDesc: 'Cập nhật mật khẩu của bạn tại đây',
    EnterCurrentPassword: 'Nhập mật khẩu hiện tại',
    CurrentPassword: 'Mật khẩu hiện tại',
    RepeatNewPassword: 'Nhập lại mật khẩu mới',
    NewPassword: 'Mật khẩu mới',
    ConfirmPassword: 'Xác nhận mật khẩu',
    MinChars: 'Tối thiểu 8 ký tự',
    PasswordLooksGood: 'Ổn rồi',
    PasswordTooShort: 'Mật khẩu quá ngắn (tối thiểu 8 ký tự)',
    PasswordsDontMatch: 'Mật khẩu nhập lại không khớp',
    NewEqualsOld: 'Mật khẩu mới phải khác mật khẩu hiện tại',
    CurrentPasswordWrong: 'Mật khẩu hiện tại không đúng',
    PasswordUpdated: 'Đã cập nhật mật khẩu',

    // ---------- Missing helpers / Settings page extras ----------
    Utilities: 'Tiện ích',
    EditCategories: 'Sửa danh mục',
    Trash: 'Thùng rác',
    Data: 'Dữ liệu',
    DataDangerNote: 'Hành động hủy dữ liệu. Mọi dữ liệu sẽ bị xóa vĩnh viễn. Hãy sao lưu nếu cần.',
    MaterialsExclusiveDefault: 'Chỉ một mặc định cho mỗi tên',

    // VAT panel labels used in settings-client
    Vat: 'VAT',
    VatEnable: 'Bật VAT',
    VatDefaultRate: 'Tỷ lệ VAT mặc định %',

    // Reset modal (scope labels & descriptions)
    ScopeMaterials: 'Nguyên liệu',
    ScopeSuppliers: 'Nhà cung cấp',
    ScopeCategories: 'Danh mục',
    ScopeRecipes: 'Công thức',
    ScopeEquipment: 'Thiết bị',
    ScopeAll: 'Tất cả',
    ScopeDescMaterials: 'Xóa tất cả nguyên liệu và lịch sử giá của chúng. Đơn vị (UOM) không bị ảnh hưởng.',
    ScopeDescSuppliers: 'Xóa nhà cung cấp và liên kết nhà cung cấp - nguyên liệu.',
    ScopeDescCategories: 'Xóa danh mục món, sơ chế và nguyên liệu.',
    ScopeDescRecipes: 'Xóa công thức món và sơ chế cùng các thành phần của chúng.',
    ScopeDescEquipment: 'Xóa thiết bị và lịch sử giá của chúng.',
    ScopeDescAll: 'Xóa toàn bộ: công thức, danh mục, nguyên liệu, nhà cung cấp và thiết bị.',
    OnlyOwnerResetAll: 'Chỉ chủ sở hữu mới được phép đặt lại tất cả',
    ResetAll: 'Đặt lại tất cả',
    TypeToConfirm: 'Nhập để xác nhận:',
    IrreversibleAck: 'Tôi hiểu thao tác này không thể hoàn tác',
    ResetCompleted: 'Hoàn tất đặt lại',
    OK: 'OK',

    // Reset buttons (Data section)
    ResetMaterials: 'Đặt lại Nguyên liệu',
    ResetSuppliers: 'Đặt lại Nhà cung cấp',
    ResetCategories: 'Đặt lại Danh mục',
    ResetRecipes: 'Đặt lại Công thức',
    ResetEquipment: 'Đặt lại Thiết bị',

    // Category chooser modal
    ChooseCategories: 'Chọn bộ danh mục',
    ChooseCategoriesDesc: 'Chọn nhóm danh mục bạn muốn chỉnh sửa.',
    DishCategories: 'Danh mục món',
    PrepCategories: 'Danh mục sơ chế',
    EquipmentCategories: 'Danh mục thiết bị',

    // Small generic
    NoItems: 'Không có mục nào',
    VatDisabledWarn: 'VAT đang tắt trong Cài đặt',
    NothingToResolve: 'Không có gì cần xử lý.',
    NewCategoriesFromCsv: 'Danh mục mới trong CSV',
    ChooseCreateOrMap: 'Chọn tạo mới hoặc ánh xạ vào mục hiện có',
    NewSuppliersFromCsv: 'Nhà cung cấp mới trong CSV',
    ProceedWithImportQuestion: 'Tiếp tục nhập dữ liệu?',
    ChooseFile: 'Chọn tệp',
    NoFileChosen: 'Chưa chọn tệp',

    // ---------- Suppliers page (NEW) ----------
    Suppliers: 'Nhà cung cấp',
    SupplierLabel: 'Nhà cung cấp',
    NewSupplier: 'Thêm nhà cung cấp',
    PointOfContact: 'Người liên hệ',
    OrderMethod: 'Phương thức đặt hàng',
    PaymentTerm: 'Điều khoản thanh toán',
    PaymentMethod: 'Phương thức thanh toán',
    SearchSuppliersPlaceholder: 'Tìm nhà cung cấp, người liên hệ, điện thoại, email…'
  },
} as const

/** Tipi utili */
type Dict = typeof dict.en

/** Normalizza qualsiasi valore (es. 'vn', 'vi-VN', 'en-US') a 'en' | 'vi' */
export function normalizeLang(raw: unknown): Lang {
  const s = String(raw ?? 'en').toLowerCase()
  if (s === 'vi' || s.startsWith('vi-') || s === 'vn' || s.startsWith('vn-')) return 'vi'
  return 'en'
}

/**
 * t(...) tollera entrambe le firme:
 *  - t(lang, key)
 *  - t(key, lang)
 * Fallback: lingua richiesta → EN → nome chiave
 */
export function t(a: unknown, b: unknown): string {
  let lang: Lang
  let key: keyof Dict

  if ((a === 'en' || a === 'vi') && typeof b === 'string') {
    // nuova firma: t(lang, key)
    lang = a
    key = b as keyof Dict
  } else if ((b === 'en' || b === 'vi') && typeof a === 'string') {
    // vecchia firma: t(key, lang)
    lang = b
    key = a as keyof Dict
  } else {
    // casi sporchi
    lang = normalizeLang(a)
    key = String(b ?? a) as keyof Dict
  }

  const L = normalizeLang(lang)
  const fromLang = (dict[L] as any)[key]
  if (fromLang != null) return fromLang as string

  const fromEn = (dict.en as any)[key]
  return (fromEn != null ? fromEn : String(key)) as string
}

/** Hint dinamico per i decimali */
export function decimalsHint(n: number, rawLang: unknown) {
  const L = normalizeLang(rawLang)
  if (n <= 0) return t(L, 'DecimalsNone')
  if (n === 1) return t(L, 'DecimalsOne')
  return `${n} ${L === 'vi' ? 'chữ số thập phân' : 'decimals'}`
}
